<% include ./partials/header.ejs %>
<div class="w-full min-h-screen bg-red-100 px-10 py-5 text-zinc-800">
    <h1 class="text-xl">Create a new post</h1>
    <hr class="opacity-10 mt-3">
    <form id="createPostForm" action="/createpost" method="post" enctype="multipart/form-data">
        <input id="postImageInput" class="block w-1/3 px-3 py-2 mt-4" type="file" name="postimage">
        <input id="titleInput" class="block w-1/3 px-3 py-2 border-2 rounded-xl mt-4" type="text" placeholder="Title" name="title">
        <p id="titleError" class="text-red-500 text-sm hidden"></p> <!-- Placeholder for title error -->
        <textarea id="descriptionInput" class="block w-1/3 h-52 px-3 py-2 border-2 rounded-xl mt-4" type="text" placeholder="Description" name="description"></textarea>
        <p id="descriptionError" class="text-red-500 text-sm hidden"></p> <!-- Placeholder for description error -->
        <input class="block text-white font-semibold w-1/3 px-3 py-2 rounded-xl mt-4 bg-red-600 hover:bg-red-700" type="submit" value="Upload Capture">
    </form>
    <a class="block text-white font-semibold w-1/3 px-3 py-2 rounded-xl text-center mt-4 bg-zinc-600 hover:bg-zinc-700" href="/profile">Cancel</a>
</div>
<% include ./partials/footer.ejs %>

<script>
    document.getElementById('createPostForm').addEventListener('submit', function(event) {
        const titleInput = document.getElementById('titleInput');
        const descriptionInput = document.getElementById('descriptionInput');
        const titleError = document.getElementById('titleError');
        const descriptionError = document.getElementById('descriptionError');
        let hasError = false;

        if (!titleInput.value.trim()) {
            titleError.textContent = 'Title is required.';
            titleError.classList.remove('hidden');
            hasError = true;
        } else {
            titleError.classList.add('hidden');
        }

        if (!descriptionInput.value.trim()) {
            descriptionError.textContent = 'Description is required.';
            descriptionError.classList.remove('hidden');
            hasError = true;
        } else {
            descriptionError.classList.add('hidden');
        }

        if (hasError) {
            event.preventDefault();
        }
    });
</script>
